import{_ as e,W as a,X as d,Y as i}from"./framework-3a42445a.js";const r={},n=i(`<h1 id="misskey構築・運用系メモ" tabindex="-1"><a class="header-anchor" href="#misskey構築・運用系メモ" aria-hidden="true">#</a> Misskey構築・運用系メモ</h1><p>結構詰まったりドキュメント読むだけでは解決出来なかったりしたのでちょっとずつメモを残していくことにした。</p><h2 id="サーバーの基本構築" tabindex="-1"><a class="header-anchor" href="#サーバーの基本構築" aria-hidden="true">#</a> サーバーの基本構築</h2><h3 id="不要パッケージを削除する" tabindex="-1"><a class="header-anchor" href="#不要パッケージを削除する" aria-hidden="true">#</a> 不要パッケージを削除する</h3><p>使用しているサーバーによって異なるので適宜。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sudo apt autoremove
sudo apt clean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="monitの導入" tabindex="-1"><a class="header-anchor" href="#monitの導入" aria-hidden="true">#</a> monitの導入</h3><h3 id="mackerelの導入" tabindex="-1"><a class="header-anchor" href="#mackerelの導入" aria-hidden="true">#</a> Mackerelの導入</h3><p>APIキーはサイトからとる。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>wget -q -O - https://mackerel.io/file/script/setup-all-apt-v2.sh | MACKEREL_APIKEY=&#39;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&#39; sh
sudo apt install mackerel-agent-plugins
sudo vi /etc/mackerel-agent/mackerel-agent.conf
sudo systemctl reload mackerel-agent.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[plugin.metrics.nginx]
command = &quot;mackerel-plugin-nginx&quot;

[plugin.metrics.docker]
command = [&quot;mackerel-plugin-docker&quot;, &quot;-name-format&quot;, &quot;name&quot;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="misskeyの実行まで" tabindex="-1"><a class="header-anchor" href="#misskeyの実行まで" aria-hidden="true">#</a> Misskeyの実行まで</h2><h2 id="docker-compose-を-systemd-で実行する" tabindex="-1"><a class="header-anchor" href="#docker-compose-を-systemd-で実行する" aria-hidden="true">#</a> docker-compose を systemd で実行する</h2><h2 id="リバースプロクシの設定" tabindex="-1"><a class="header-anchor" href="#リバースプロクシの設定" aria-hidden="true">#</a> リバースプロクシの設定</h2><h2 id="証明書取得-let-s-encrypt" tabindex="-1"><a class="header-anchor" href="#証明書取得-let-s-encrypt" aria-hidden="true">#</a> 証明書取得(Let&#39;s Encrypt)</h2><h2 id="cloudflareの設定" tabindex="-1"><a class="header-anchor" href="#cloudflareの設定" aria-hidden="true">#</a> Cloudflareの設定</h2><h2 id="オブジェクトストレージの設定" tabindex="-1"><a class="header-anchor" href="#オブジェクトストレージの設定" aria-hidden="true">#</a> オブジェクトストレージの設定</h2><h2 id="botプロテクション" tabindex="-1"><a class="header-anchor" href="#botプロテクション" aria-hidden="true">#</a> Botプロテクション</h2><h2 id="summaly-proxy" tabindex="-1"><a class="header-anchor" href="#summaly-proxy" aria-hidden="true">#</a> Summaly Proxy</h2><h2 id="プロキシアカウント" tabindex="-1"><a class="header-anchor" href="#プロキシアカウント" aria-hidden="true">#</a> プロキシアカウント</h2><h2 id="絵文字のインポート" tabindex="-1"><a class="header-anchor" href="#絵文字のインポート" aria-hidden="true">#</a> 絵文字のインポート</h2><h2 id="ロールの設定" tabindex="-1"><a class="header-anchor" href="#ロールの設定" aria-hidden="true">#</a> ロールの設定</h2><h2 id="キャッシュ削除" tabindex="-1"><a class="header-anchor" href="#キャッシュ削除" aria-hidden="true">#</a> キャッシュ削除</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>docker system prune -a
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,24),s=[n];function t(c,h){return a(),d("div",null,s)}const o=e(r,[["render",t],["__file","index.html.vue"]]);export{o as default};
